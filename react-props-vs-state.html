<!doctype html><html data-reactid=".2655dt4i1hc" data-react-checksum="-1044329157"><head data-reactid=".2655dt4i1hc.0"><meta charset="utf-8" data-reactid=".2655dt4i1hc.0.0"><title data-reactid=".2655dt4i1hc.0.1">DžejEs - JavaScript pro web</title><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" data-reactid=".2655dt4i1hc.0.2"><link rel="stylesheet" type="text/css" href="main-0507298ee8f607cce2fc.css?v=1.0.0" data-reactid=".2655dt4i1hc.0.3"><link rel="icon" type="image/png" href="images/favicon-4b52c7e9cc28fdb9378fd1542994a946.png" data-reactid=".2655dt4i1hc.0.4"><link rel="alternate" type="application/rss+xml" title="RSS" href="/feed.xml" data-reactid=".2655dt4i1hc.0.5"><link rel="canonical" href="https://www.dzejes.cz/react-props-vs-state.html" data-reactid=".2655dt4i1hc.0.6"><base target="_blank" data-reactid=".2655dt4i1hc.0.7"></head><body data-reactid=".2655dt4i1hc.1"><div data-reactid=".2655dt4i1hc.1.0"><header class="Header" data-reactid=".2655dt4i1hc.1.0.0"><div class="NavBar" data-reactid=".2655dt4i1hc.1.0.0.0"><div class="NavBar-container" data-reactid=".2655dt4i1hc.1.0.0.0.0"><div class="NavBar-item" data-reactid=".2655dt4i1hc.1.0.0.0.0.0"><a class="NavBar-link" href="/" target="_self" data-reactid=".2655dt4i1hc.1.0.0.0.0.0.0">Úvod</a><a class="NavBar-link" href="https://twitter.com/vmiksu" data-reactid=".2655dt4i1hc.1.0.0.0.0.0.1">Twitter</a><a class="NavBar-link" href="https://github.com/tajo/javascript" data-reactid=".2655dt4i1hc.1.0.0.0.0.0.2">GitHub</a><a class="NavBar-link" href="/feed.xml" data-reactid=".2655dt4i1hc.1.0.0.0.0.0.3">RSS</a></div></div></div></header><div class="PageBody" data-reactid=".2655dt4i1hc.1.0.1"><div class="PageBody-container" data-reactid=".2655dt4i1hc.1.0.1.0"><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0"><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$0"><h1>React - Props vs State<a id="react-props-vs-state">&nbsp;</a></h1><p><strong>React se točí kolem props a tak je nejvyšší čas si ukázat, co jsou zač</strong>. Minule jsem už naznačil, že jde o druhý zdroj dat, který React komponenty pro své vykreslení používají. Povíme si, jak se props liší od state a jakým způsobem se používají. To vše si demonstrujeme na pokročilejším příkladě, který se bude skládat z více komponent. Na nich uvidíte i to, jakým způsobem se komponenty do sebe skládají a jak spolu komunikují. <strong>Dnes to bude o úplných základech Reactu</strong>.</p>
<h2>Props<a id="props">&nbsp;</a></h2><p><strong>React komponenty lze do sebe skládat</strong> a proto je potřeba, aby měly prostředek pro předávání dat. Tím jsou právě ony props, které tak tvoří páteř všech React aplikací.</p>
<p>V hlavní React komponentě můžeme mít metodu:</p>
<code class="codeBlock"><span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token function" >return<span class="token punctuation" >(</span></span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>h1<span class="token operator" >></span><span class="token qualifier" >Zv</span>ířata<span class="token operator" >&lt;</span><span class="token operator" >/</span>h1<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token qualifier" >Animal</span> name<span class="token operator" >=</span><span class="token string" >"Baryk"</span> type<span class="token operator" >=</span><span class="token string" >"dog"</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token qualifier" >Animal</span> name<span class="token operator" >=</span><span class="token string" >"Lizza"</span> type<span class="token operator" >=</span><span class="token string" >"cat"</span> <span class="token operator" >/</span><span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p><strong>Animal je přitom jen další React komponenta</strong>. Ta tímto získala přístup k <code>this.props.name</code> a <code>this.props.type</code>. Její <code>render</code> metoda může vypadat třeba takto:</p>
<code class="codeBlock"><span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token function" >return<span class="token punctuation" >(</span></span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>h1<span class="token operator" >></span><span class="token qualifier" >Zv</span>íře<span class="token operator" >&lt;</span><span class="token operator" >/</span>h1<span class="token operator" >></span>
      <span class="token qualifier" >Jm</span>éno<span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>name<span class="token punctuation" >}</span>
      <span class="token qualifier" >Typ</span><span class="token punctuation" >:</span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>type<span class="token punctuation" >}</span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p><strong>Předávat můžeme samozřejmě i funkce či objekty. Všechno je jen a pouze čistý JavaScript. Props fungují pouze jednosměrně směrem zhora dolů.</strong> Zvíře tudíž nemá způsob, jak změnit props komponenty Zvířata. Může nicméně dostat od rodičovské komponenty skrz props callback a ten zavolat. Tento jednosměrný postup velmi redukuje komplexnost aplikací.</p>
<p>Už víte, že <code>render()</code> se volá při změně props a state. <strong>S jeho voláním se ale navíc přerendruje i celý podstrom potomků.</strong> Pokud by někdo změnil state/props v komponentě Zvířata, tak se zavolají <code>render</code> metody i u komponenty Zvíře.</p>
<h2>Zadání úlohy<a id="zad-n-lohy">&nbsp;</a></h2><p><strong>Dnešním cílem bude vytvoření jednoduché databáze aut</strong>. Každé auto bude mít 3 údaje - značku, model a rok výroby. Tyto údaje budou seskupené do karty, která bude umožňovat (roz)skrýt model a rok. Jednotlivá auta budeme moct přidávat a mazat.</p>
<h2>Návrh komponent<a id="n-vrh-komponent">&nbsp;</a></h2><p><strong>Při navrhování React aplikací začínáme tím, že si musíme aplikaci rozkouskovat do jednotlivých komponent</strong>. Při rozdělování do komponent se lze přidržet i vizuální podoby. Logickým kandidátem na samostatnou komponentu je karta auta. Další částí rozhraní je formulář pro přidání auta, šup s ním do druhé komponenty. Nakonec potřebujeme ještě někde formulář a auta vypsat a máme tak komponentu třetí - hlavní.</p>
<h2>Kam se stavem<a id="kam-se-stavem">&nbsp;</a></h2><p><strong>Jaké stavy v aplikaci vlastně budeme mít? Jde především o detaily aut</strong>. Vhodným kandidátem pro uložení je pole objektů, kde každý objekt bude reprezentovat jedno auto. Ale kam s ním? V naší jednoduché aplikaci moc na výběr nemáme. Pole aut musí být v hlavní komponentě, která jednotlivá auta bude vykreslovat.</p>
<p><strong>Dalším stavem pak bude to, zda je karta auta rozbalená či zabalená.</strong> Asi vás ihned napadne, že tento stav patří do komponenty auta. Také ho ale můžeme umístit jako další vlastnost objektu auto. Oba přístupy jsou v pohodě.</p>
<p>Nicméně, obecným <strong>trendem v React aplikacích je zahnat veškeré stavy někam &quot;do rohu&quot; na jedno místo</strong>. Proč nechceme mít stavy roztroušené po aplikaci? Tak například si představte, že bychom chtěli přidat tlačítko &quot;Rozbal všechna auta&quot;. Podobnou funkcionalitu bychom přirozeně umístili do hlavní komponenty, ale jak pak aktualizovat tento stav v jednotlivých komponentách aut? Není způsob jak komponenty aut proiterovat a zavolat <code>auto.rozbalit()</code>, protože to by byl imperativní přístup, který v Reactu (naštěstí) nefunguje.</p>
<p><strong>Komponentu s vnitřním stavem nemůžeme 100% ovládat z vnějšího prostředí</strong>. Pokud však stav vystrčíme někam ven a komponeta bude používat pro své vykreslování pouze zděděné props, dostaneme nad ní plnou kontrolu.</p>
<p><strong>Lokální stav je tedy přijatelný pouze, pokud ho nikdy nebudeme potřebovat upravovat či číst vně komponenty</strong>. Nicméně i takovýto superlokální stav můžeme snadno &quot;globalizovat&quot; a mít tak všechny React komponenty &quot;čisté&quot; a plně kontrolovatelné. To si však ukážeme až později s Flux architekturou. A nebojte, je globální stav a globální stav.</p>
<h2>Komponenta Auto<a id="komponenta-auto">&nbsp;</a></h2><p><strong>Nejlepším postupem je budovat aplikaci od spoda</strong>, jelikož pak můžete rychle vše testovat, což je vždy lepší než půl hodiny psát kód naslepo. Napíšeme si tedy nejdříve komponentu auto. Představíme si, jak asi bude vypadat objekt auta, který dostaneme skrz props:</p>
<code class="codeBlock"><span class="token punctuation" >{</span>id<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span> brand<span class="token punctuation" >:</span> <span class="token string" >'Ferrari'</span><span class="token punctuation" >,</span> model<span class="token punctuation" >:</span> <span class="token string" >'FF'</span><span class="token punctuation" >,</span> year<span class="token punctuation" >:</span> <span class="token string" >'2014'</span><span class="token punctuation" >,</span> details<span class="token punctuation" >:</span> <span class="token primitive" >false</span><span class="token punctuation" >}</span></code><p><code>id</code> se nám bude hodit pro snadnou manipulaci v případě mazání a rozbalování. <code>details</code> nám pak určuje, zda je karta rozbalená či zabalená.</p>
<p>Začneme tím, že si data vypíšeme:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Car</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div<span class="token operator" >></span><span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Zna</span>čka<span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>brand<span class="token punctuation" >}</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>details <span class="token operator" >&amp;&amp;</span>
          <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
            <span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Model</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>model<span class="token punctuation" >}</span> <span class="token operator" >&lt;</span>br <span class="token operator" >/</span><span class="token operator" >></span>
            <span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Rok</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>year<span class="token punctuation" >}</span>
          <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token punctuation" >}</span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p>Všimnětě si, že v JSX nemůžete obalit kus kódu do nějakého makra <code>{if} ... {else}</code>, protože by to nebyla regulérní JS syntax. <strong>Do <code>{}</code> lze zabalit jen validní JS výrazy, něco co se dá vypsat</strong>. Nikoliv třeba řídící bloky. O JSX bude ještě samostatný článek. Můžeme si ale pomoct jednoduchou obezličkou viz výše. Pokud bychom přesto trvali na <code>if</code>, mohli bychom si výsledek předuložit do nějaké proměnné před <code>return()</code>.</p>
<p><strong>Jak si to teď otestujeme?</strong> Vytvoříme si další hlavní komponentu a v ní si <code>Car</code> vypíšeme:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Car</span> from <span class="token string" >'./car'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Cars</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> car <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span>
      brand<span class="token punctuation" >:</span> <span class="token string" >'Ferrari'</span><span class="token punctuation" >,</span>
      model<span class="token punctuation" >:</span> <span class="token string" >'FF'</span><span class="token punctuation" >,</span>
      year<span class="token punctuation" >:</span> <span class="token string" >'2014'</span><span class="token punctuation" >,</span>
      details<span class="token punctuation" >:</span> <span class="token primitive" >true</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Car</span> car<span class="token operator" >=</span><span class="token punctuation" >{</span>car<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p>Uložíme a výsledek by měl vypadat takto:</p>
<p></div><div class="codeBlock" style="border-left:solid 5px rgba(44, 83, 158, 0.9);" data-reactid=".2655dt4i1hc.1.0.1.0.0.$1"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.0"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.0.0">Značka:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.0.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.0.2">Ferrari</span></div><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.0">Model:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.2">FF</span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.3"> </span><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.4"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.5">Rok:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.6"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.$cars1.0.1.7">2014</span></div></div></div><div style="font-size:0.8em;bottom:0;right:0;margin:5px;position:absolute;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.1"><a href="https://github.com/tajo/javascript/tree/master/examples/react/cars1.js" data-reactid=".2655dt4i1hc.1.0.1.0.0.$1.1.0">zdrojový kód</a></div></div><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$2"></p>
<p>S komponentou auta jsme už skoro hotoví. Zbývá si ji ještě trochu ostylovat a přidat do ní tlačíka pro mazání a rozbalování. <strong>Dobrým zvykem je v komponentách deklarovat jaké typ props očekávají, že jim budou předány</strong>. React pak v devel režimu provádí automatickou kontrolu a upozorní nás, pokud nesedí typy nebo na něco zapomeneme:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Car</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> styles <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      border<span class="token punctuation" >:</span> <span class="token string" >'2px solid #CCC'</span><span class="token punctuation" >,</span>
      padding<span class="token punctuation" >:</span> <span class="token number" >10</span><span class="token punctuation" >,</span>
      margin<span class="token punctuation" >:</span> <span class="token string" >'10px 10px 10px 0px'</span><span class="token punctuation" >,</span>
      backgroundColor<span class="token punctuation" >:</span> <span class="token string" >'#FFF'</span><span class="token punctuation" >,</span>
      float<span class="token punctuation" >:</span> <span class="token string" >'left'</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div style<span class="token operator" >=</span><span class="token punctuation" >{</span>styles<span class="token punctuation" >}</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
          <span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Zna</span>čka<span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>brand<span class="token punctuation" >}</span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>details <span class="token operator" >&amp;&amp;</span>
          <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
            <span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Model</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>model<span class="token punctuation" >}</span> <span class="token operator" >&lt;</span>br <span class="token operator" >/</span><span class="token operator" >></span>
            <span class="token operator" >&lt;</span>b<span class="token operator" >></span><span class="token qualifier" >Rok</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>b<span class="token operator" >></span> <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>year<span class="token punctuation" >}</span>
          <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
        <span class="token punctuation" >}</span>

        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >toggle<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >></span>
          <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>details <span class="token operator" >?</span> <span class="token string" >'Méně'</span> <span class="token punctuation" >:</span> <span class="token string" >'Více'</span><span class="token punctuation" >}</span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
        <span class="token punctuation" >{</span><span class="token string" >' '</span><span class="token punctuation" >}</span>

        <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >remove<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span>car<span class="token punctuation" >.</span>id<span class="token punctuation" >)</span><span class="token punctuation" >}</span><span class="token operator" >></span>
          x
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span>

<span class="token qualifier" >Car</span><span class="token punctuation" >.</span>propTypes <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  car<span class="token punctuation" >:</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span><span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>object<span class="token punctuation" >.</span>isRequired<span class="token punctuation" >,</span>
  remove<span class="token punctuation" >:</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span><span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>func<span class="token punctuation" >.</span>isRequired<span class="token punctuation" >,</span>
  toggle<span class="token punctuation" >:</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span><span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>func<span class="token punctuation" >.</span>isRequired
<span class="token punctuation" >}</span><span class="token punctuation" >;</span></code><p><strong>React má i pěkný aparát na zápis inline stylů.</strong> Místo pomlček se používá camelCase a není třeba potřeba psát &#39;px&#39;. O stylování pomocí JavaScriptu bude možná ještě samostatný článek, protože je to také zajímavá problematika.</p>
<p>Akce v této komponentě řešit nebudeme. Ať se postará rodič a předá nám skrz props callbacky, které máme zavolat. <code>{&#39; &#39;}</code> je taková srandička, protože JSX není HTML a nový řádek se nepřeloží do mezery, kterou tam ale mít chceme. Lehce také upravíme root komponentu, protože musíme předat nově i callbacky:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Car</span> from <span class="token string" >'./car'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Cars</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >const</span> car1 <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span>
      brand<span class="token punctuation" >:</span> <span class="token string" >'Ferrari'</span><span class="token punctuation" >,</span>
      model<span class="token punctuation" >:</span> <span class="token string" >'FF'</span><span class="token punctuation" >,</span>
      year<span class="token punctuation" >:</span> <span class="token string" >'2014'</span><span class="token punctuation" >,</span>
      details<span class="token punctuation" >:</span> <span class="token primitive" >true</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    <span class="token keyword" >const</span> car2 <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      id<span class="token punctuation" >:</span> <span class="token number" >2</span><span class="token punctuation" >,</span>
      brand<span class="token punctuation" >:</span> <span class="token string" >'BMW'</span><span class="token punctuation" >,</span>
      model<span class="token punctuation" >:</span> <span class="token string" >'M5'</span><span class="token punctuation" >,</span>
      year<span class="token punctuation" >:</span> <span class="token string" >'2013'</span><span class="token punctuation" >,</span>
      details<span class="token punctuation" >:</span> <span class="token primitive" >false</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >;</span>

    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Car</span> car<span class="token operator" >=</span><span class="token punctuation" >{</span>car1<span class="token punctuation" >}</span> remove<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >}</span> toggle<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Car</span> car<span class="token operator" >=</span><span class="token punctuation" >{</span>car2<span class="token punctuation" >}</span> remove<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >}</span> toggle<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >removeCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >log<span class="token punctuation" >(</span></span>`remove $<span class="token punctuation" >{</span>id<span class="token punctuation" >}</span>`<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >toggleCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >log<span class="token punctuation" >(</span></span>`toggle $<span class="token punctuation" >{</span>id<span class="token punctuation" >}</span>`<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p>Přidali jsme si i další auto, ať vidíme, jak se komponenta chová, když je zabalená. Výsledek (otevřte si konzoli a zkuste poklepat na tlačítka):</p>
<p></div><div class="codeBlock" style="border-left:solid 5px rgba(44, 83, 158, 0.9);" data-reactid=".2655dt4i1hc.1.0.1.0.0.$3"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2"><div style="border:2px solid #CCC;padding:10px;margin:10px 10px 10px 0px;background-color:#FFF;float:left;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.0"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.0.0">Značka:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.0.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.0.2">Ferrari</span></div><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.0">Model:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.2">FF</span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.3"> </span><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.4"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.5">Rok:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.6"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.1.7">2014</span></div><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.2">Méně</button><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.3"> </span><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.0.4">x</button></div><div style="border:2px solid #CCC;padding:10px;margin:10px 10px 10px 0px;background-color:#FFF;float:left;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.0"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.0.0">Značka:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.0.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.0.2">BMW</span></div><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.2">Více</button><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.3"> </span><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.$cars2.1.4">x</button></div></div><div style="font-size:0.8em;bottom:0;right:0;margin:5px;position:absolute;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.1"><a href="https://github.com/tajo/javascript/tree/master/examples/react/cars2.js" data-reactid=".2655dt4i1hc.1.0.1.0.0.$3.1.0">zdrojový kód</a></div></div><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$4"></p>
<h2>Komponenta nové auto<a id="komponenta-nov-auto">&nbsp;</a></h2><p>Nyní si připravíme komponentu pro přidání nového auta. Bude to jen jednoduchý formulář s metodou, která po jeho odeslání zavolá callback rodiče:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>findDOMNode<span class="token punctuation" >}</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token string" >'./addCar.less'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >AddCar</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div className<span class="token operator" >=</span><span class="token string" >"addCar"</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>h3<span class="token operator" >></span><span class="token qualifier" >Nov</span>é auto<span class="token operator" >&lt;</span><span class="token operator" >/</span>h3<span class="token operator" >></span>
        <span class="token operator" >&lt;</span>form onSubmit<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >(</span>e<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >handleSubmit<span class="token punctuation" >(</span></span>e<span class="token punctuation" >)</span><span class="token punctuation" >}</span> ref<span class="token operator" >=</span><span class="token string" >"addCar"</span><span class="token operator" >></span>
          <span class="token operator" >&lt;</span>label htmlFor<span class="token operator" >=</span><span class="token string" >"brand"</span><span class="token operator" >></span><span class="token qualifier" >Zna</span>čka<span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>label<span class="token operator" >></span>
          <span class="token operator" >&lt;</span>input id<span class="token operator" >=</span><span class="token string" >"brand"</span> type<span class="token operator" >=</span><span class="token string" >"text"</span> name<span class="token operator" >=</span><span class="token string" >"brand"</span> ref<span class="token operator" >=</span><span class="token string" >"brand"</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token operator" >&lt;</span>br <span class="token operator" >/</span><span class="token operator" >></span>

          <span class="token operator" >&lt;</span>label htmlFor<span class="token operator" >=</span><span class="token string" >"model"</span><span class="token operator" >></span><span class="token qualifier" >Model</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>label<span class="token operator" >></span>
          <span class="token operator" >&lt;</span>input id<span class="token operator" >=</span><span class="token string" >"model"</span> type<span class="token operator" >=</span><span class="token string" >"text"</span> name<span class="token operator" >=</span><span class="token string" >"model"</span> ref<span class="token operator" >=</span><span class="token string" >"model"</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token operator" >&lt;</span>br <span class="token operator" >/</span><span class="token operator" >></span>

          <span class="token operator" >&lt;</span>label htmlFor<span class="token operator" >=</span><span class="token string" >"year"</span><span class="token operator" >></span><span class="token qualifier" >Rok</span><span class="token punctuation" >:</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>label<span class="token operator" >></span>
          <span class="token operator" >&lt;</span>input id<span class="token operator" >=</span><span class="token string" >"year"</span> type<span class="token operator" >=</span><span class="token string" >"text"</span> name<span class="token operator" >=</span><span class="token string" >"year"</span> ref<span class="token operator" >=</span><span class="token string" >"year"</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token operator" >&lt;</span>br <span class="token operator" >/</span><span class="token operator" >></span>

          <span class="token operator" >&lt;</span>input type<span class="token operator" >=</span><span class="token string" >"submit"</span> value<span class="token operator" >=</span><span class="token string" >"Přidat"</span> <span class="token operator" >/</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token operator" >/</span>form<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >handleSubmit<span class="token punctuation" >(</span></span>e<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    e<span class="token punctuation" >.</span><span class="token function" >preventDefault<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>props<span class="token punctuation" >.</span><span class="token function" >add<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      brand<span class="token punctuation" >:</span> <span class="token function" >findDOMNode<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>refs<span class="token punctuation" >.</span>brand<span class="token punctuation" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation" >,</span>
      model<span class="token punctuation" >:</span> <span class="token function" >findDOMNode<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>refs<span class="token punctuation" >.</span>model<span class="token punctuation" >)</span><span class="token punctuation" >.</span>value<span class="token punctuation" >,</span>
      year<span class="token punctuation" >:</span> <span class="token function" >findDOMNode<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>refs<span class="token punctuation" >.</span>year<span class="token punctuation" >)</span><span class="token punctuation" >.</span>value
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token function" >findDOMNode<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >.</span>refs<span class="token punctuation" >.</span>addCar<span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >reset<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span>

<span class="token qualifier" >Add</span><span class="token qualifier" >Car</span><span class="token punctuation" >.</span>propTypes <span class="token operator" >=</span> <span class="token punctuation" >{</span>
  add<span class="token punctuation" >:</span> <span class="token qualifier" >React</span><span class="token punctuation" >.</span><span class="token qualifier" >Prop</span><span class="token qualifier" >Types</span><span class="token punctuation" >.</span>func<span class="token punctuation" >.</span>isRequired
<span class="token punctuation" >}</span><span class="token punctuation" >;</span></code><p>V metodě <code>render()</code> není mnoho zajímavého. Za zmínku stojí, že <strong>občas jsou některé atributy v JSX přejmenované</strong>. Například <code>for</code> na <code>htmlFor</code>, či <code>class</code> na <code>className</code>. To proto, aby nedocházelo ke kolizím s klíčovými slovy JS. Pokud byste na to však zapomněli, tak vám React poradí v konzoli. React je velmi výřečný co se warningů a errorů týče, což je dobře.</p>
<p>Formulář má na sobě pověšený listener <code>onSubmit</code>, který po odeslání zavolá příslušnou metodu. <strong>V ní musíme ihned zavolat <code>e.preventDefault()</code></strong>, jinak by došlo k redirectu aneb standardní chování prohlížeče.</p>
<p><strong>Důležitým atributem je <code>ref</code></strong>. Ten se hodí, pokud si chceme &quot;šáhnout&quot; na skutečný DOM element. V JSX si ho pomocí tohoto atributu označkujeme a pak se k němu díky <code>React.findDOMNode(this.refs.foo)</code> můžeme dostat. Vidíte, že k hodnotám formuláře přistupujeme velmi nízkoúrovňově, nepotřebujeme žádnou komplikovanou a zbytečnou abstrakci.</p>
<p><strong>V našem příkladě používáme &quot;nekontrolované&quot; vstupní elementy</strong>. Toto je totiž jediná výjimka, kdy React na chvílí přihmouří oči a nechá vás měnit hodnoty v DOMu (value v inputech), aniž by do toho jakkoliv zasahoval. <strong>Existuje však druhý &quot;kontrolovaný&quot; přístup</strong>. Ten je lepší z více důvodů (není potřeba &quot;šahat&quot; na DOM elementy, snadná validace, persistence rozepsaného formuláře atp.), ale o tom bude ještě samostatný článek. V dnešním nám stačí tento první přímočařejší přístup.</p>
<p>Formulář si i decentně ostylujeme. Tentokrát pomocí LESSu:</p>
<code class="codeBlock"><span class="token punctuation" >.</span>addCar <span class="token punctuation" >{</span>
  label <span class="token punctuation" >{</span>
    width<span class="token punctuation" >:</span> 65px<span class="token punctuation" >;</span>
    display<span class="token punctuation" >:</span> inline<span class="token operator" >-</span>block<span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >}</span></code><p>Nyní si hotovou komponentu zas vyzkoušíme:</p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Add</span><span class="token qualifier" >Car</span> from <span class="token string" >'./addCar'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Cars</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Add</span><span class="token qualifier" >Car</span> add<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>addCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >addCar<span class="token punctuation" >(</span></span>car<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    console<span class="token punctuation" >.</span><span class="token function" >log<span class="token punctuation" >(</span></span>`add $<span class="token punctuation" >{</span>car<span class="token punctuation" >}</span>`<span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p>A výsledek:</p>
<p></div><div class="codeBlock" style="border-left:solid 5px rgba(44, 83, 158, 0.9);" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3"><div class="addCar" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0"><h3 data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.0">Nové auto</h3><form data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1"><label for="brand" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.0">Značka:</label><input id="brand" type="text" name="brand" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.1"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.2"><label for="model" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.3">Model:</label><input id="model" type="text" name="model" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.4"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.5"><label for="year" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.6">Rok:</label><input id="year" type="text" name="year" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.7"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.8"><input type="submit" value="Přidat" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.$cars3.0.1.9"></form></div></div><div style="font-size:0.8em;bottom:0;right:0;margin:5px;position:absolute;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.1"><a href="https://github.com/tajo/javascript/tree/master/examples/react/cars3.js" data-reactid=".2655dt4i1hc.1.0.1.0.0.$5.1.0">zdrojový kód</a></div></div><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$6"></p>
<h2>Hlavní komponenta Auta<a id="hlavn-komponenta-auta">&nbsp;</a></h2><p><strong>Teď už nám zbývá to dát vše dohromady</strong> v hlavní komponentě a implementovat metody <code>addCar</code>, <code>toggleCar</code> a <code>removeCar</code>. Začneme konstruktorem, ve kterém si inicializujeme databázi aut a nabindujeme metodám správný context:</p>
<code class="codeBlock"><span class="token function" >constructor<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token function" >super<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation" >{</span>cars<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token punctuation" >{</span>id<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span> brand<span class="token punctuation" >:</span> <span class="token string" >'Ferrari'</span><span class="token punctuation" >,</span> model<span class="token punctuation" >:</span> <span class="token string" >'FF'</span><span class="token punctuation" >,</span> year<span class="token punctuation" >:</span> <span class="token string" >'2014'</span><span class="token punctuation" >,</span> details<span class="token punctuation" >:</span> <span class="token primitive" >false</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >{</span>id<span class="token punctuation" >:</span> <span class="token number" >2</span><span class="token punctuation" >,</span> brand<span class="token punctuation" >:</span> <span class="token string" >'BMW'</span><span class="token punctuation" >,</span> model<span class="token punctuation" >:</span> <span class="token string" >'M5'</span><span class="token punctuation" >,</span> year<span class="token punctuation" >:</span> <span class="token string" >'2013'</span><span class="token punctuation" >,</span> details<span class="token punctuation" >:</span> <span class="token primitive" >true</span><span class="token punctuation" >}</span>
  <span class="token punctuation" >]</span><span class="token punctuation" >}</span><span class="token punctuation" >;</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span>addCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>addCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span>removeCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p>Nyní pojďme na jednotlivé metody. Nebude to už žádná věda. <code>addCar</code> vypadá takto:</p>
<code class="codeBlock"><span class="token function" >addCar<span class="token punctuation" >(</span></span>car<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  car<span class="token punctuation" >.</span>id <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length <span class="token operator" >?</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >[</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length <span class="token operator" >-</span> <span class="token number" >1</span><span class="token punctuation" >]</span><span class="token punctuation" >.</span>id <span class="token operator" >+</span> <span class="token number" >1</span> <span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >;</span>

  <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
    cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >concat<span class="token punctuation" >(</span></span><span class="token punctuation" >[</span>car<span class="token punctuation" >]</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p>Jedinou zvláštností je to, že jsme si potřebovali &quot;vygenerovat&quot; unikátní <code>id</code>. Použil jsem prostou inkrementaci <code>id</code> posledního přidaného auta. V případě, že v poli <code>this.state.cars</code> už žádné položky nejsou, tak se použije <code>1</code>. Mohli bychom použít třeba i náhodný řetězec.</p>
<p><code>removeCar</code> má podobu:</p>
<code class="codeBlock"><span class="token function" >removeCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
    cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >filter<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> car<span class="token punctuation" >.</span>id <span class="token operator" >!</span><span class="token operator" >==</span> id<span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p><code>filter</code> je jedna z užitečných funkcí pole. Pro každý prvek v poli zavolá funkci, kterou mu předáme. Pokud je její výsledek <code>true</code>, tak ho vrátí i ve výsledném poli. Jednoduše si tedy smazané auto tímto odfiltrujeme.</p>
<p>A zbývá <code>toggleCar</code>:</p>
<code class="codeBlock"><span class="token function" >toggleCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
    cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >map<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      <span class="token block-keyword" >if</span> <span class="token punctuation" >(</span>car<span class="token punctuation" >.</span>id <span class="token operator" >!</span><span class="token operator" >==</span> id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        <span class="token keyword" >return</span> car<span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span>
      car<span class="token punctuation" >.</span>details <span class="token operator" >=</span> <span class="token operator" >!</span>car<span class="token punctuation" >.</span>details<span class="token punctuation" >;</span>
      <span class="token keyword" >return</span> car<span class="token punctuation" >;</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p><code>map</code> zavolá pro každý prvek pole funkci, kterou mu předáme. Není to úplně hezké řešení, ale nám to pro tuto chvíli stačí. Lepší by bylo nemít auta v poli, ale v objektu (mapě) a přistupovat k nim přímo pomocí <code>id</code>. Nicméně, to nám zase nezaručí jednoznačné pořadí. Brzo si však představíme <a href="https://facebook.github.io/immutable-js/">Immutable.js</a>, které rožšiřuje JS o pěkné immutable kolekce. Například zde by se nám velmi hodilo <code>Immutable.OrderedMap()</code>.</p>
<p>V <code>render()</code> už k žádným překvapením nedochází. Vše si pouze vypíšeme:</p>
<code class="codeBlock"><span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span><span class="token qualifier" >Add</span><span class="token qualifier" >Car</span> add<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>addCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
      <span class="token operator" >&lt;</span>h3<span class="token operator" >></span><span class="token qualifier" >Auta</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>h3<span class="token operator" >></span>
      <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >map<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
        <span class="token keyword" >return</span> <span class="token operator" >&lt;</span><span class="token qualifier" >Car</span> car<span class="token operator" >=</span><span class="token punctuation" >{</span>car<span class="token punctuation" >}</span>
                    key<span class="token operator" >=</span><span class="token punctuation" >{</span>car<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span>
                    remove<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >}</span>
                    toggle<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
<span class="token punctuation" >}</span></code><p><strong>To, že React slouží pro mapování dat na DOM, není jen řečnický obrat, ale doslovná skutečnost.</strong> Můžeme vidět, jak pomocí funkce <code>map</code> vytváříme na základě stavu pole nových React komponent, které se ihned vypíší. Přibyl atribut <code>key={car.id}</code>. Ten slouží čistě potřebám Reactu, aby měl přehled o tom, které elementy v budoucím rendrování zmizí či se jen přemístí. Může pak lépe optimalizovat. Pokud byste <code>key</code> neuvedli, tak vám v konzoli React vynadá, ale kód bude stále funkční.</p>
<p><strong>Dílo je u konce. Celá hlavní komponenta vypadá takto:</strong></p>
<code class="codeBlock"><span class="token keyword" >import</span> <span class="token qualifier" >React</span> from <span class="token string" >'react'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Car</span> from <span class="token string" >'./car'</span><span class="token punctuation" >;</span>
<span class="token keyword" >import</span> <span class="token qualifier" >Add</span><span class="token qualifier" >Car</span> from <span class="token string" >'./addCar'</span><span class="token punctuation" >;</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token keyword" >class</span> <span class="token class-name" >Cars</span> <span class="token keyword" >extends</span> <span class="token class-name" >React<span class="token punctuation" >.</span>Component</span> <span class="token punctuation" >{</span>

  <span class="token function" >constructor<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token function" >super<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>state <span class="token operator" >=</span> <span class="token punctuation" >{</span>cars<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token punctuation" >{</span>id<span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >,</span> brand<span class="token punctuation" >:</span> <span class="token string" >'Ferrari'</span><span class="token punctuation" >,</span> model<span class="token punctuation" >:</span> <span class="token string" >'FF'</span><span class="token punctuation" >,</span> year<span class="token punctuation" >:</span> <span class="token string" >'2014'</span><span class="token punctuation" >,</span> details<span class="token punctuation" >:</span> <span class="token primitive" >false</span><span class="token punctuation" >}</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>id<span class="token punctuation" >:</span> <span class="token number" >2</span><span class="token punctuation" >,</span> brand<span class="token punctuation" >:</span> <span class="token string" >'BMW'</span><span class="token punctuation" >,</span> model<span class="token punctuation" >:</span> <span class="token string" >'M5'</span><span class="token punctuation" >,</span> year<span class="token punctuation" >:</span> <span class="token string" >'2013'</span><span class="token punctuation" >,</span> details<span class="token punctuation" >:</span> <span class="token primitive" >true</span><span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >}</span><span class="token punctuation" >;</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>addCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>addCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>removeCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >.</span><span class="token function" >bind<span class="token punctuation" >(</span></span><span class="token var" >this</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >render<span class="token punctuation" >(</span></span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
      <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
        <span class="token operator" >&lt;</span><span class="token qualifier" >Add</span><span class="token qualifier" >Car</span> add<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>addCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span>
        <span class="token operator" >&lt;</span>h3<span class="token operator" >></span><span class="token qualifier" >Auta</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length<span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token operator" >&lt;</span><span class="token operator" >/</span>h3<span class="token operator" >></span>
        <span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >map<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token keyword" >return</span> <span class="token operator" >&lt;</span><span class="token qualifier" >Car</span> car<span class="token operator" >=</span><span class="token punctuation" >{</span>car<span class="token punctuation" >}</span>
                      key<span class="token operator" >=</span><span class="token punctuation" >{</span>car<span class="token punctuation" >.</span>id<span class="token punctuation" >}</span>
                      remove<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>removeCar<span class="token punctuation" >}</span>
                      toggle<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token var" >this</span><span class="token punctuation" >.</span>toggleCar<span class="token punctuation" >}</span> <span class="token operator" >/</span><span class="token operator" >></span><span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
    <span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >addCar<span class="token punctuation" >(</span></span>car<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    car<span class="token punctuation" >.</span>id <span class="token operator" >=</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length <span class="token operator" >?</span>
      <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >[</span><span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span>length <span class="token operator" >-</span> <span class="token number" >1</span><span class="token punctuation" >]</span><span class="token punctuation" >.</span>id <span class="token operator" >+</span> <span class="token number" >1</span> <span class="token punctuation" >:</span> <span class="token number" >1</span><span class="token punctuation" >;</span>

    <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >concat<span class="token punctuation" >(</span></span><span class="token punctuation" >[</span>car<span class="token punctuation" >]</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >removeCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >filter<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> car<span class="token punctuation" >.</span>id <span class="token operator" >!</span><span class="token operator" >==</span> id<span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

  <span class="token function" >toggleCar<span class="token punctuation" >(</span></span>id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token var" >this</span><span class="token punctuation" >.</span><span class="token function" >setState<span class="token punctuation" >(</span></span><span class="token punctuation" >{</span>
      cars<span class="token punctuation" >:</span> <span class="token var" >this</span><span class="token punctuation" >.</span>state<span class="token punctuation" >.</span>cars<span class="token punctuation" >.</span><span class="token function" >map<span class="token punctuation" >(</span></span>car <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
        <span class="token block-keyword" >if</span> <span class="token punctuation" >(</span>car<span class="token punctuation" >.</span>id <span class="token operator" >!</span><span class="token operator" >==</span> id<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          <span class="token keyword" >return</span> car<span class="token punctuation" >;</span>
        <span class="token punctuation" >}</span>
        car<span class="token punctuation" >.</span>details <span class="token operator" >=</span> <span class="token operator" >!</span>car<span class="token punctuation" >.</span>details<span class="token punctuation" >;</span>
        <span class="token keyword" >return</span> car<span class="token punctuation" >;</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >;</span>
  <span class="token punctuation" >}</span>

<span class="token punctuation" >}</span></code><p><strong>Tadááááá. Výsledná aplikace:</strong></p>
<p></div><div class="codeBlock" style="border-left:solid 5px rgba(44, 83, 158, 0.9);" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars"><div class="addCar" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0"><h3 data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.0">Nové auto</h3><form data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1"><label for="brand" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.0">Značka:</label><input id="brand" type="text" name="brand" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.1"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.2"><label for="model" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.3">Model:</label><input id="model" type="text" name="model" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.4"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.5"><label for="year" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.6">Rok:</label><input id="year" type="text" name="year" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.7"><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.8"><input type="submit" value="Přidat" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.0.1.9"></form></div><h3 data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.1"><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.1.0">Auta (</span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.1.1">2</span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.1.2">)</span></h3><div style="border:2px solid #CCC;padding:10px;margin:10px 10px 10px 0px;background-color:#FFF;float:left;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.0"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.0.0">Značka:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.0.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.0.2">Ferrari</span></div><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.2">Více</button><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.3"> </span><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$1.4">x</button></div><div style="border:2px solid #CCC;padding:10px;margin:10px 10px 10px 0px;background-color:#FFF;float:left;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2"><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.0"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.0.0">Značka:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.0.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.0.2">BMW</span></div><div data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.0">Model:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.1"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.2">M5</span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.3"> </span><br data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.4"><b data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.5">Rok:</b><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.6"> </span><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.1.7">2013</span></div><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.2">Méně</button><span data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.3"> </span><button data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.$cars.2:$2.4">x</button></div></div><div style="font-size:0.8em;bottom:0;right:0;margin:5px;position:absolute;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.1"><a href="https://github.com/tajo/javascript/tree/master/examples/react/cars.js" data-reactid=".2655dt4i1hc.1.0.1.0.0.$7.1.0">zdrojový kód</a></div></div><div style="width:100%;" data-reactid=".2655dt4i1hc.1.0.1.0.0.$8"></p>
<h2>Nedostatky<a id="nedostatky">&nbsp;</a></h2><p><strong>Jelikož se zatím soustředíme pouze na React, používáme jeho komponenty na všechno.</strong> V reálném použití se snažíme udržovat React komponenty co nejjednodušší a nikdy do nich nedáváme logiku typu <code>addCar</code>, <code>removeCar</code> či <code>toggleCar</code>. &quot;Zpětná&quot; komunikace pomocí předávání callbacků se také moc nepoužívá, jelikož to vytváří závislosti mezi jednotlivými komponentami. Navíc si představte, pokud byste měli v sobě zanořených třeba 5 komponent a museli byste si pořád vše předávat skrz props. <strong>Chybí nám tu ono M a C, chybí nám tu zatím Flux</strong>. Dalším nedostatkem je nepoužívání immutable kolekcí, které přinášejí optimalizaci velkou jako Brno. A samozřejmě <strong>formulář by také zasloužil více lásky</strong>.</p>
<h2>Závěrem<a id="z-v-rem">&nbsp;</a></h2><p><strong>Dnes jsme si naprogramovali složitější aplikaci a názorně si demonstrovali základní práci s Reactem.</strong> Páteří každé React aplikace jsou props a předávání dat skrz ně. Při vytváření nových stavů je potřeba velká obezřetnost, protože nám mohou značně zkomplikovat celou aplikaci. Je dobré stavy &quot;vyhnat&quot; na jedno místo, ideálně do root komponenty. <strong>Příště se mrkneme do hloubky na JSX a ukážeme si, že lze používat React i bez něj.</strong></p>
</div></div></div></div><footer data-reactid=".2655dt4i1hc.1.0.2"><div class="links" data-reactid=".2655dt4i1hc.1.0.2.0"><div style="float:left;" data-reactid=".2655dt4i1hc.1.0.2.0.0"><span data-reactid=".2655dt4i1hc.1.0.2.0.0.0">◀</span><span data-reactid=".2655dt4i1hc.1.0.2.0.0.1"> </span><a href="react-uvod.html" target="_self" data-reactid=".2655dt4i1hc.1.0.2.0.0.2">React - Úvod</a></div><div style="float:right;" data-reactid=".2655dt4i1hc.1.0.2.0.1"><a href="react-jsx.html" target="_self" data-reactid=".2655dt4i1hc.1.0.2.0.1.0">React - JSX</a><span data-reactid=".2655dt4i1hc.1.0.2.0.1.1"> </span><span data-reactid=".2655dt4i1hc.1.0.2.0.1.2">▶</span></div></div><div class="Footer" data-reactid=".2655dt4i1hc.1.0.2.1"><span data-reactid=".2655dt4i1hc.1.0.2.1.0">Diskutujte prostřednictvím </span><a href="https://github.com/tajo/javascript/issues" data-reactid=".2655dt4i1hc.1.0.2.1.1">issues</a><span data-reactid=".2655dt4i1hc.1.0.2.1.2">.</span><br data-reactid=".2655dt4i1hc.1.0.2.1.3"><span data-reactid=".2655dt4i1hc.1.0.2.1.4">Vylepšete článek </span><a href="https://github.com/tajo/javascript/pulls" data-reactid=".2655dt4i1hc.1.0.2.1.5">pull requestem</a><span data-reactid=".2655dt4i1hc.1.0.2.1.6">.</span><br data-reactid=".2655dt4i1hc.1.0.2.1.7"><span data-reactid=".2655dt4i1hc.1.0.2.1.8">Sledujte na </span><a href="https://twitter.com/vmiksu" data-reactid=".2655dt4i1hc.1.0.2.1.9">twitteru</a><span data-reactid=".2655dt4i1hc.1.0.2.1.a">. </span><span data-reactid=".2655dt4i1hc.1.0.2.1.b"> </span><a href="/feed.xml" data-reactid=".2655dt4i1hc.1.0.2.1.c">RSS</a><span data-reactid=".2655dt4i1hc.1.0.2.1.d">.</span><br data-reactid=".2655dt4i1hc.1.0.2.1.e"><span data-reactid=".2655dt4i1hc.1.0.2.1.f">Inspirováno </span><a href="https://github.com/este/este" data-reactid=".2655dt4i1hc.1.0.2.1.g">Este</a><span data-reactid=".2655dt4i1hc.1.0.2.1.h">.</span><br data-reactid=".2655dt4i1hc.1.0.2.1.i"><b data-reactid=".2655dt4i1hc.1.0.2.1.j">Sdílejte!</b></div></footer></div><script data-reactid=".2655dt4i1hc.1.1">window.INITIAL_PROPS = {"location":"react-props-vs-state.html","devMode":false,"files":{"main.css":"main-0507298ee8f607cce2fc.css","main.js":"main-0507298ee8f607cce2fc.js"}};
</script><script src="main-0507298ee8f607cce2fc.js" data-reactid=".2655dt4i1hc.1.2"></script><div data-reactid=".2655dt4i1hc.1.3">
        <script>
          var host = "dzejes.cz";
          if ((host == window.location.host) && (window.location.protocol != "https:")) {
            window.location.protocol = "https";
          }

          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
          ga('create', 'UA-63660429-1', 'auto');
          ga('send', 'pageview');
        </script>
      </div></body></html>